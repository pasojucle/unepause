{% set route = page.template.route %}
{% set route_parameters = page.template.routeParameters %}
{% set parameters = [] %}
{% set class_active = '' %}
{% if route == current_route  and (current_action is null or current_action == action.slug) and (class_item == 'nav-link' or current_page == page.slug) %}
    {% set class_active = ' active' %}
{% endif %}
{% for parameter in route_parameters %}
    {% if parameter.name == 'action' %}
        {% set parameters = parameters|merge({'action':attribute(action, parameter.value)}) %}
    {% endif %}
    {% if parameter.name == 'page' and action.slug != page.slug %}
        {% set parameters = parameters|merge({'page':attribute(page, parameter.value)}) %}
    {% endif %}
{% endfor %}
<a href="{{ path(route, parameters = parameters) }}" class="{{ class_item }}{{ class_active}}">{{ page.name }}</a>
